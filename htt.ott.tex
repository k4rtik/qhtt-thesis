% generated by Ott 0.31 from: htt.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{termvar} ,\, \ottmv{x} $ &  \\
 $ \ottmv{ghostvar} ,\, \ottmv{g} ,\, \ottmv{e} ,\, \ottmv{u} $ &  \\
 $ \ottmv{subspace} ,\, \ottmv{S} $ &  \\
 $ \psi ,\, \psi $ &  \\
 $ \ottmv{amplitudes} ,\, \ottmv{alpha} ,\, \ottmv{beta} $ &  \\
}}

\newcommand{\ottTyp}{
\ottrulehead{\ottnt{Typ}  ,\ \ottnt{A}  ,\ \ottnt{B}  ,\ \ottnt{C}}{::=}{\ottcom{Types}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{K}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{unit}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{bit}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{qbit}}{}{}{}{\ottcom{Index to a logical qubit}}\ottprodnewline
\ottprodline{|}{\ottkw{vector}}{}{}{}{\ottcom{Quantum state vectors}}\ottprodnewline
\ottprodline{|}{\ottkw{complex}}{}{}{}{\ottcom{Complex scalars}}\ottprodnewline
\ottprodline{|}{\ottkw{unitary}}{}{}{}{\ottcom{Type of unitaries}}\ottprodnewline
\ottprodline{|}{\ottkw{prop}}{}{}{}{\ottcom{Type of propositions}}\ottprodnewline
\ottprodline{|}{\Pi \, \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{.}  \ottnt{B}}{}{}{}{\ottcom{Dependent function}}\ottprodnewline
\ottprodline{|}{\ottnt{A}  \rightarrow  \ottnt{B}}{}{}{}{\ottcom{Sugar for Pi type}}\ottprodnewline
\ottprodline{|}{\ottnt{A} \, \otimes \, \ottnt{B}}{}{}{}{\ottcom{Pair}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottnt{P}  \ottsym{\}}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{\{}  \ottnt{Q}  \ottsym{\}}}{}{}{}{\ottcom{Hoare Type}}\ottprodnewline
\ottprodline{|}{\ottkw{QST} \, \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{(} \, \ottkw{requires} \, \ottsym{\{}  \ottnt{P}  \ottsym{\}}  \ottsym{)}  \ottsym{(} \, \ottkw{ensures} \, \ottsym{\{}  \ottnt{Q}  \ottsym{\}}  \ottsym{)}}{}{}{}{\ottcom{Sugar for Q. Hoare Type}}}

\newcommand{\ottProp}{
\ottrulehead{\ottnt{Prop}  ,\ \ottnt{P}  ,\ \ottnt{Q}  ,\ \ottnt{R}}{::=}{\ottcom{Propositions (\textbf{prop})}}\ottprodnewline
\ottfirstprodline{|}{\top}{}{}{}{\ottcom{Complete state space, trivial}}\ottprodnewline
\ottprodline{|}{\bot}{}{}{}{\ottcom{\{0\}, trivial}}\ottprodnewline
\ottprodline{|}{\ottnt{P}  \wedge  \ottnt{Q}}{}{}{}{\ottcom{Intersection of subspaces. P, Q}}\ottprodnewline
\ottprodline{|}{\ottnt{P}  \ottsym{,}  \ottnt{Q}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{P}  \vee  \ottnt{Q}}{}{}{}{\ottcom{Sum of subspaces}}\ottprodnewline
\ottprodline{|}{\ottnt{U} \, \cdot \, \ottnt{P}}{}{}{}{\ottcom{Operator}}\ottprodnewline
\ottprodline{|}{\ottmv{x} \, \in_q \, \ottmv{S}}{}{}{}{\ottcom{x lies in subspace S}}\ottprodnewline
\ottprodline{|}{\ottmv{x}  =_q  \psi}{}{}{}{\ottcom{x is equal to state $\psi$}}\ottprodnewline
\ottprodline{|}{\ottkw{uniform} \, \ottsym{(}  \ottmv{x}  \ottsym{)}}{}{}{}{\ottcom{x is uniformly distributed}}\ottprodnewline
\ottprodline{|}{\ottkw{separable} \, \ottsym{(}  \ottmv{x}  \ottsym{)}}{}{}{}{\ottcom{x is separable. x $\equiv_q$ u}}\ottprodnewline
\ottprodline{|}{\ottkw{class} \, \ottsym{(}  \ottmv{x}  \ottsym{)}}{}{}{}{\ottcom{x is classical. x $\equiv_{cl}$ u}}}

\newcommand{\ottTm}{
\ottrulehead{\ottnt{Tm}  ,\ \ottnt{K}  ,\ \ottnt{L}  ,\ \ottnt{M}  ,\ \ottnt{N}}{::=}{\ottcom{Terms}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{x}}{}{}{}{\ottcom{Variable}}\ottprodnewline
\ottprodline{|}{\ottsym{()}}{}{}{}{\ottcom{Unit}}\ottprodnewline
\ottprodline{|}{\ottsym{0}}{}{}{}{\ottcom{0 value of type bit}}\ottprodnewline
\ottprodline{|}{\ottsym{1}}{}{}{}{\ottcom{1 value of type bit}}\ottprodnewline
\ottprodline{|}{\psi}{}{}{}{\ottcom{Metavariable for quantum state vector}}\ottprodnewline
\ottprodline{|}{\lambda  \ottmv{x}  \ottsym{.}  \ottnt{M}}{}{}{}{\ottcom{Abstraction}}\ottprodnewline
\ottprodline{|}{\ottnt{K} \, \ottnt{N}}{}{}{}{\ottcom{Application}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{M}  \ottsym{,}  \ottnt{N}  \ottsym{)}}{}{}{}{\ottcom{Pair}}\ottprodnewline
\ottprodline{|}{\ottkw{fst} \, \ottnt{K}}{}{}{}{\ottcom{First projection from a pair}}\ottprodnewline
\ottprodline{|}{\ottkw{snd} \, \ottnt{K}}{}{}{}{\ottcom{Second projection from a pair}}\ottprodnewline
\ottprodline{|}{\ottkw{do} \, \ottnt{E}}{}{}{}{\ottcom{Suspended computation}}\ottprodnewline
\ottprodline{|}{\ottnt{M}  \ottsym{:}  \ottnt{A}}{}{}{}{\ottcom{Type annotation}}}

\newcommand{\ottCmd}{
\ottrulehead{\ottnt{Cmd}  ,\ \ottnt{c}}{::=}{\ottcom{Commands}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{init} \, \ottnt{M}}{}{}{}{\ottcom{Initialization}}\ottprodnewline
\ottprodline{|}{\ottkw{apply} \, \ottnt{U} \, \ottkw{to} \, \ottnt{M}}{}{}{}{\ottcom{Unitary application}}\ottprodnewline
\ottprodline{|}{\ottkw{meas} \, \ottnt{M}}{}{}{}{\ottcom{Measurement}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottnt{M} \, \ottkw{then} \, \ottnt{E_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{E_{{\mathrm{2}}}}}{}{}{}{\ottcom{Conditional}}}

\newcommand{\ottUnitary}{
\ottrulehead{\ottnt{Unitary}  ,\ \ottnt{U}}{::=}{\ottcom{Unitaries}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{I}}{}{}{}{\ottcom{Identity}}\ottprodnewline
\ottprodline{|}{\ottkw{X}}{}{}{}{\ottcom{Pauli X}}\ottprodnewline
\ottprodline{|}{\ottkw{Y}}{}{}{}{\ottcom{Pauli Y}}\ottprodnewline
\ottprodline{|}{\ottkw{Z}}{}{}{}{\ottcom{Pauli Z}}\ottprodnewline
\ottprodline{|}{\ottkw{H}}{}{}{}{\ottcom{Hadamard}}\ottprodnewline
\ottprodline{|}{\ottkw{CX}}{}{}{}{\ottcom{CNOT}}\ottprodnewline
\ottprodline{|}{\ottkw{CZ}}{}{}{}{\ottcom{Controlled-Z}}}

\newcommand{\ottComp}{
\ottrulehead{\ottnt{Comp}  ,\ \ottnt{E}  ,\ \ottnt{F}}{::=}{\ottcom{Computations}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{return} \, \ottnt{M}}{}{}{}{\ottcom{return}}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \leftarrow  \ottnt{K}  \ottsym{;}  \ottnt{E}}{}{}{}{\ottcom{run computation K}}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \leftarrow  \ottnt{c}  \ottsym{;}  \ottnt{E}}{}{}{}{\ottcom{run command c}}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{=}  \ottnt{M}  \ottsym{;}  \ottnt{E}}{}{}{}{\ottcom{let binding}}}

\newcommand{\ottCtx}{
\ottrulehead{\ottnt{Ctx}  ,\ \Gamma}{::=}{\ottcom{Contexts}}\ottprodnewline
\ottfirstprodline{|}{\cdot}{}{}{}{\ottcom{empty context}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}}{}{}{}{\ottcom{context extension}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottnt{P}}{}{}{}{\ottcom{context extension with prop}}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottTyp\ottinterrule
\ottProp\ottinterrule
\ottTm\ottinterrule
\ottCmd\ottinterrule
\ottUnitary\ottinterrule
\ottComp\ottinterrule
\ottCtx\ottafterlastrule
}}

% defnss
% defns Jtype
%% defn ctx
\newcommand{\ottdrulectxXXEmpty}[1]{\ottdrule[#1]{%
}{
\vdash  \cdot \, \ottkw{ctx}}{%
{\ottdrulename{ctx\_Empty}}{}%
}}


\newcommand{\ottdrulectxXXType}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma \, \ottkw{ctx}}%
\ottpremise{\Gamma  \vdash  \ottnt{A} \, \ottkw{type}}%
}{
\vdash  \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A} \, \ottkw{ctx}}{%
{\ottdrulename{ctx\_Type}}{}%
}}


\newcommand{\ottdrulectxXXProp}[1]{\ottdrule[#1]{%
\ottpremise{\vdash  \Gamma \, \ottkw{ctx}}%
\ottpremise{\Gamma  \vdash  \ottnt{P}  \ottsym{:} \, \ottkw{prop}}%
}{
\vdash  \Gamma  \ottsym{,}  \ottnt{P} \, \ottkw{ctx}}{%
{\ottdrulename{ctx\_Prop}}{}%
}}

\newcommand{\ottdefnctx}[1]{\begin{ottdefnblock}[#1]{$\vdash  \Gamma \, \ottkw{ctx}$}{\ottcom{Checking contexts}}
\ottusedrule{\ottdrulectxXXEmpty{}}
\ottusedrule{\ottdrulectxXXType{}}
\ottusedrule{\ottdrulectxXXProp{}}
\end{ottdefnblock}}

%% defn Type
\newcommand{\ottdruletyXXUnit}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottkw{unit} \, \ottkw{type}}{%
{\ottdrulename{ty\_Unit}}{}%
}}


\newcommand{\ottdruletyXXBit}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottkw{bit} \, \ottkw{type}}{%
{\ottdrulename{ty\_Bit}}{}%
}}


\newcommand{\ottdruletyXXQbit}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottkw{qbit} \, \ottkw{type}}{%
{\ottdrulename{ty\_Qbit}}{}%
}}


\newcommand{\ottdruletyXXProp}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottkw{prop} \, \ottkw{type}}{%
{\ottdrulename{ty\_Prop}}{}%
}}


\newcommand{\ottdruletyXXPi}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{A} \, \ottkw{type}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vdash  \ottnt{B} \, \ottkw{type}}%
}{
\Gamma  \vdash  \Pi \, \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{.}  \ottnt{B} \, \ottkw{type}}{%
{\ottdrulename{ty\_Pi}}{}%
}}


\newcommand{\ottdruletyXXPair}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{A} \, \ottkw{type}}%
\ottpremise{\Gamma  \vdash  \ottnt{B} \, \ottkw{type}}%
}{
\Gamma  \vdash  \ottnt{A} \, \otimes \, \ottnt{B} \, \ottkw{type}}{%
{\ottdrulename{ty\_Pair}}{}%
}}


\newcommand{\ottdruletyXXHoare}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{A} \, \ottkw{type}}%
\ottpremise{\Gamma  \vdash  \ottnt{P}  \ottsym{:} \, \ottkw{prop}}%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vdash  \ottnt{Q}  \ottsym{:} \, \ottkw{prop}}%
}{
\Gamma  \vdash  \ottsym{\{}  \ottnt{P}  \ottsym{\}}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{\{}  \ottnt{Q}  \ottsym{\}} \, \ottkw{type}}{%
{\ottdrulename{ty\_Hoare}}{}%
}}

\newcommand{\ottdefnType}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{A} \, \ottkw{type}$}{\ottcom{$\ottnt{A}$ is a type}}
\ottusedrule{\ottdruletyXXUnit{}}
\ottusedrule{\ottdruletyXXBit{}}
\ottusedrule{\ottdruletyXXQbit{}}
\ottusedrule{\ottdruletyXXProp{}}
\ottusedrule{\ottdruletyXXPi{}}
\ottusedrule{\ottdruletyXXPair{}}
\ottusedrule{\ottdruletyXXHoare{}}
\end{ottdefnblock}}

%% defn TyEq

\newcommand{\ottdefnTyEq}[1]{\begin{ottdefnblock}[#1]{$\ottnt{A}  \ottsym{=}  \ottnt{B}$}{\ottcom{$\ottnt{A}$ and $\ottnt{B}$ are equal as types}}
\end{ottdefnblock}}

%% defn TmEq

\newcommand{\ottdefnTmEq}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{M}  \ottsym{=}  \ottnt{N}  \ottsym{:}  \ottnt{A}$}{\ottcom{$\ottnt{M}$ and $\ottnt{N}$ are equal as terms of type $\ottnt{A}$}}
\end{ottdefnblock}}

%% defn Un

\newcommand{\ottdefnUn}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{U}  \ottsym{:} \, \ottkw{unitary}$}{}
\end{ottdefnblock}}

%% defn Prop
\newcommand{\ottdrulepropXXTopI}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \top  \ottsym{:} \, \ottkw{prop}}{%
{\ottdrulename{prop\_TopI}}{}%
}}


\newcommand{\ottdrulepropXXBotI}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \bot  \ottsym{:} \, \ottkw{prop}}{%
{\ottdrulename{prop\_BotI}}{}%
}}


\newcommand{\ottdrulepropXXConjI}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{P}  \ottsym{:} \, \ottkw{prop}}%
\ottpremise{\Gamma  \vdash  \ottnt{Q}  \ottsym{:} \, \ottkw{prop}}%
}{
\Gamma  \vdash  \ottnt{P}  \wedge  \ottnt{Q}  \ottsym{:} \, \ottkw{prop}}{%
{\ottdrulename{prop\_ConjI}}{}%
}}


\newcommand{\ottdrulepropXXDisjI}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{P}  \ottsym{:} \, \ottkw{prop}}%
\ottpremise{\Gamma  \vdash  \ottnt{Q}  \ottsym{:} \, \ottkw{prop}}%
}{
\Gamma  \vdash  \ottnt{P}  \vee  \ottnt{Q}  \ottsym{:} \, \ottkw{prop}}{%
{\ottdrulename{prop\_DisjI}}{}%
}}


\newcommand{\ottdrulepropXXUnI}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{U}  \ottsym{:} \, \ottkw{unitary}}%
\ottpremise{\Gamma  \vdash  \ottnt{P}  \ottsym{:} \, \ottkw{prop}}%
}{
\Gamma  \vdash  \ottnt{U} \, \cdot \, \ottnt{P}  \ottsym{:} \, \ottkw{prop}}{%
{\ottdrulename{prop\_UnI}}{}%
}}

\newcommand{\ottdefnProp}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{P}  \ottsym{:} \, \ottkw{prop}$}{\ottcom{$\ottnt{P}$ is a $\ottkw{prop}$}}
\ottusedrule{\ottdrulepropXXTopI{}}
\ottusedrule{\ottdrulepropXXBotI{}}
\ottusedrule{\ottdrulepropXXConjI{}}
\ottusedrule{\ottdrulepropXXDisjI{}}
\ottusedrule{\ottdrulepropXXUnI{}}
\end{ottdefnblock}}

%% defn Term
\newcommand{\ottdruletmXXVarE}[1]{\ottdrule[#1]{%
}{
\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vdash  \ottmv{x}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{tm\_VarE}}{}%
}}


\newcommand{\ottdruletmXXUnitI}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottsym{()}  \ottsym{:}  \ottkw{unit}}{%
{\ottdrulename{tm\_UnitI}}{}%
}}


\newcommand{\ottdruletmXXZeroI}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottsym{0}  \ottsym{:}  \ottkw{bit}}{%
{\ottdrulename{tm\_ZeroI}}{}%
}}


\newcommand{\ottdruletmXXOneI}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \ottsym{1}  \ottsym{:}  \ottkw{bit}}{%
{\ottdrulename{tm\_OneI}}{}%
}}


\newcommand{\ottdruletmXXVectorI}[1]{\ottdrule[#1]{%
}{
\Gamma  \vdash  \psi  \ottsym{:}  \ottkw{vector}}{%
{\ottdrulename{tm\_VectorI}}{}%
}}


\newcommand{\ottdruletmXXPiI}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \vdash  \ottnt{M}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vdash  \lambda  \ottmv{x}  \ottsym{.}  \ottnt{M}  \ottsym{:}  \Pi \, \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{.}  \ottnt{B}}{%
{\ottdrulename{tm\_PiI}}{}%
}}


\newcommand{\ottdruletmXXPairI}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{M}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\Gamma  \vdash  \ottnt{N}  \ottsym{:}  \ottnt{B}}%
}{
\Gamma  \vdash  \ottsym{(}  \ottnt{M}  \ottsym{,}  \ottnt{N}  \ottsym{)}  \ottsym{:}  \ottnt{A} \, \otimes \, \ottnt{B}}{%
{\ottdrulename{tm\_PairI}}{}%
}}


\newcommand{\ottdruletmXXElimIntro}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{K}  \ottsym{:}  \ottnt{A}}%
\ottpremise{\ottnt{A}  \ottsym{=}  \ottnt{B}}%
}{
\Gamma  \vdash  \ottnt{K}  \ottsym{:}  \ottnt{B}}{%
{\ottdrulename{tm\_ElimIntro}}{}%
}}


\newcommand{\ottdruletmXXPiE}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{K}  \ottsym{:}  \Pi \, \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{.}  \ottnt{B}}%
\ottpremise{\Gamma  \vdash  \ottnt{M}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vdash  \ottnt{K} \, \ottnt{M}  \ottsym{:}  \ottnt{B}  \ottsym{[}  \ottnt{M}  \ottsym{/}  \ottmv{x}  \ottsym{]}}{%
{\ottdrulename{tm\_PiE}}{}%
}}


\newcommand{\ottdruletmXXFstE}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{K}  \ottsym{:}  \ottnt{A} \, \otimes \, \ottnt{B}}%
}{
\Gamma  \vdash  \ottkw{fst} \, \ottnt{K}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{tm\_FstE}}{}%
}}


\newcommand{\ottdruletmXXSndE}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{K}  \ottsym{:}  \ottnt{A} \, \otimes \, \ottnt{B}}%
}{
\Gamma  \vdash  \ottkw{snd} \, \ottnt{K}  \ottsym{:}  \ottnt{B}}{%
{\ottdrulename{tm\_SndE}}{}%
}}


\newcommand{\ottdruletmXXAscriptionE}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \vdash  \ottnt{A} \, \ottkw{type}}%
\ottpremise{\Gamma  \vdash  \ottnt{M}  \ottsym{:}  \ottnt{A}}%
}{
\Gamma  \vdash  \ottnt{M}  \ottsym{:}  \ottnt{A}  \ottsym{:}  \ottnt{A}}{%
{\ottdrulename{tm\_AscriptionE}}{}%
}}

\newcommand{\ottdefnTerm}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \vdash  \ottnt{M}  \ottsym{:}  \ottnt{A}$}{\ottcom{term $\ottnt{M}$ has type $\ottnt{A}$}}
\ottusedrule{\ottdruletmXXVarE{}}
\ottusedrule{\ottdruletmXXUnitI{}}
\ottusedrule{\ottdruletmXXZeroI{}}
\ottusedrule{\ottdruletmXXOneI{}}
\ottusedrule{\ottdruletmXXVectorI{}}
\ottusedrule{\ottdruletmXXPiI{}}
\ottusedrule{\ottdruletmXXPairI{}}
\ottusedrule{\ottdruletmXXElimIntro{}}
\ottusedrule{\ottdruletmXXPiE{}}
\ottusedrule{\ottdruletmXXFstE{}}
\ottusedrule{\ottdruletmXXSndE{}}
\ottusedrule{\ottdruletmXXAscriptionE{}}
\end{ottdefnblock}}

%% defn Prove

\newcommand{\ottdefnProve}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \models  \ottnt{P}$}{\ottcom{Proof obligation $\ottnt{P}$}}
\end{ottdefnblock}}

%% defn CompIntro

\newcommand{\ottdefnCompIntro}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \ottsym{;}  \ottnt{P}  \vdash  \ottnt{E}  \ottsym{:}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{.}  \ottnt{Q}$}{\ottcom{With $\Gamma, \ottnt{P}, \ottnt{A}$ check that $\ottnt{E}$ returns a value of type $\ottnt{A}$ with postcond. $\ottnt{Q}$}}
\end{ottdefnblock}}

%% defn CompElim

\newcommand{\ottdefnCompElim}[1]{\begin{ottdefnblock}[#1]{$\Gamma  \ottsym{;}  \ottnt{P}  \vdash  \ottnt{E}  \ottsym{:}  \ottmv{x}  \ottsym{:}  \ottnt{A}  \ottsym{.}  \ottnt{Q}$}{\ottcom{With $\Gamma, \ottnt{P}, \ottnt{E}, \ottnt{A}$ as input, synthesize the strongest postcondition $\ottnt{Q}$}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJtype}{
\ottdefnctx{}\ottdefnType{}\ottdefnTyEq{}\ottdefnTmEq{}\ottdefnUn{}\ottdefnProp{}\ottdefnTerm{}\ottdefnProve{}\ottdefnCompIntro{}\ottdefnCompElim{}}

\newcommand{\ottdefnss}{
\ottdefnsJtype
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

